<app-header></app-header>

<div class="container">
  <div class="header">
    <h1>Add New Employee</h1>
    <button class="btn btn-secondary" routerLink="/employees">
      <i class="fas fa-arrow-left"></i> Back to List
    </button>
  </div>

  <div class="card">
    <div class="card-body">
      <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name *</label>
            <input 
              type="text" 
              id="firstName" 
              formControlName="firstName" 
              class="form-control" 
              [ngClass]="{'is-invalid': submitted && f['firstName'].errors}"
            />
            <div *ngIf="submitted && f['firstName'].errors" class="invalid-feedback">
              <div *ngIf="f['firstName'].errors['required']">First Name is required</div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="lastName">Last Name *</label>
            <input 
              type="text" 
              id="lastName" 
              formControlName="lastName" 
              class="form-control" 
              [ngClass]="{'is-invalid': submitted && f['lastName'].errors}"
            />
            <div *ngIf="submitted && f['lastName'].errors" class="invalid-feedback">
              <div *ngIf="f['lastName'].errors['required']">Last Name is required</div>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email" 
            formControlName="email" 
            class="form-control" 
            [ngClass]="{'is-invalid': submitted && f['email'].errors}"
          />
          <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
            <div *ngIf="f['email'].errors['required']">Email is required</div>
            <div *ngIf="f['email'].errors['email']">Email must be a valid email address</div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="gender">Gender</label>
            <select id="gender" formControlName="gender" class="form-control">
              <option value="">Select Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="salary">Salary</label>
            <input 
              type="number" 
              id="salary" 
              formControlName="salary" 
              class="form-control" 
              [ngClass]="{'is-invalid': submitted && f['salary'].errors}"
            />
            <div *ngIf="submitted && f['salary'].errors" class="invalid-feedback">
              <div *ngIf="f['salary'].errors['min']">Salary cannot be negative</div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="department">Department</label>
            <select id="department" formControlName="department" class="form-control">
              <option value="">Select Department</option>
              <option value="Engineering">Engineering</option>
              <option value="HR">HR</option>
              <option value="Marketing">Marketing</option>
              <option value="Finance">Finance</option>
              <option value="Sales">Sales</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="position">Position</label>
            <select id="position" formControlName="position" class="form-control">
              <option value="">Select Position</option>
              <option value="Manager">Manager</option>
              <option value="Developer">Developer</option>
              <option value="Designer">Designer</option>
              <option value="Analyst">Analyst</option>
              <option value="HR Specialist">HR Specialist</option>
              <option value="Accountant">Accountant</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label for="profilePicture">Profile Picture</label>
          <div class="profile-upload">
            <div class="profile-preview" *ngIf="profileImagePreview">
              <img [src]="profileImagePreview" alt="Profile Preview" />
            </div>
            <input 
              type="file" 
              id="profilePicture" 
              (change)="onFileChange($event)" 
              accept="image/*"
              class="form-control-file"
            />
          </div>
        </div>
        
        <div *ngIf="error" class="alert alert-danger mt-3">{{error}}</div>
        
        <div class="form-actions">
          <button type="submit" [disabled]="loading" class="btn btn-primary">
            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
            Add Employee
          </button>
          <button type="button" class="btn btn-secondary" routerLink="/employees">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<app-footer></app-footer>